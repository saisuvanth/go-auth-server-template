<!DOCTYPE html>

<body>
	<input type="file" id="file_upload">
	<button id="btn">send</button>
	<script>
		document.getElementById("btn").addEventListener("click", sendRequest);
		function sendRequest() {
			var data = new FormData()
			data.append("json", JSON.stringify(
				{ "data": "test" }
			))
			var file = document.getElementById("file_upload").files[0]
			data.append("files", file)
			var xhr = new XMLHttpRequest()
			xhr.onreadystatechange = function () {
				if (xhr.status === 200 && xhr.readyState === 4) {
					console.log(xhr.responseText)
				} else {
					console.log(xhr.responseText)
				}
			}
			xhr.open("post", "http://127.0.0.1:8080/upload")
			xhr.send(data)
		}
	</script>
</body>